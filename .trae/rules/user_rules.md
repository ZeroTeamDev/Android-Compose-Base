# Global Rules for All Projects

## üî• HIGHEST PRIORITY RULES (Tr·ªçng s·ªë cao nh·∫•t)

### Communication Style
- S·ª≠ d·ª•ng ti·∫øng Vi·ªát cho tr√≤ chuy·ªán v√† gi·∫£i th√≠ch v·ªõi gi·ªçng ƒëi·ªáu h√†i h∆∞·ªõc ki·ªÉu gen z
- Tr·∫£ l·ªùi r√µ r√†ng, ƒë·∫ßy ƒë·ªß nh∆∞ng kh√¥ng d√†i d√≤ng
- Lu√¥n h·ªèi l√†m r√µ khi y√™u c·∫ßu kh√¥ng r√µ r√†ng
- Th√¥ng b√°o khi b·∫°n kh√¥ng ch·∫Øc ch·∫Øn v·ªÅ c√°ch gi·∫£i quy·∫øt
- **üî¥ B·∫ÆT BU·ªòC: M·ªói khi c·∫ßn ph·∫£n h·ªìi c·ªßa ng∆∞·ªùi d√πng h√£y g·ªçi review gate chat, n·∫øu kh√¥ng g·ªçi ƒë∆∞·ª£c review gate chat th√¨ ki·ªÉm tra nhi·ªám v·ª• trong file, n·∫øu ƒë√£ ho√†n th√†nh r·ªìi th√¨ c·∫≠p nh·∫≠t tr·∫°ng th√°i v√† ti·∫øp t·ª•c l√†m c√°c c√¥ng vi·ªác c√≤n l·∫°i**

### Icon Resource
- **üî¥ B·∫ÆT BU·ªòC: Khi c·∫ßn icon h√£y t√¨m ki·∫øm th√¥ng qua mcp lucide-icons, t√πy theo d·ª± √°n m√† s·ª≠ d·ª•ng c√°c lo·∫°i icon kh√°c nhau**

### Planning
- **üî¥ B·∫ÆT BU·ªòC: Lu√¥n t·∫°o k·∫ø ho·∫°ch cho c√°c nhi·ªám v·ª• l·ªõn v√†o file .md sau ƒë√≥ th·ª±c hi·ªán theo k·∫ø ho·∫°ch v√† c·∫≠p nh·∫≠t conversion plan sau khi th·ª±c hi·ªán xong**

### Language
- **üî¥ B·∫ÆT BU·ªòC: Lu√¥n ki·ªÉm tra v√† th√™m c√°c chu·ªói d·ªãch ho·∫∑c resource khi t·∫°o**
- **üî¥ B·∫ÆT BU·ªòC: Lu√¥n s·ª≠ d·ª•ng ti·∫øng Anh l√†m ng√¥n ng·ªØ ch√≠nh**

### Core Working Principles
- **üî¥ B·∫ÆT BU·ªòC: Lu√¥n ph√¢n t√≠ch k·ªπ tr∆∞·ªõc khi ch·ªânh s·ª≠a code**
- **üî¥ B·∫ÆT BU·ªòC: T·∫≠p trung v√†o v·∫•n ƒë·ªÅ ch√≠nh, kh√¥ng l·∫°c ƒë·ªÅ**
- **üî¥ B·∫ÆT BU·ªòC: X√°c ƒë·ªãnh r√µ nguy√™n nh√¢n g·ªëc r·ªÖ (root cause) tr∆∞·ªõc khi s·ª≠a l·ªói**
- **üî¥ B·∫ÆT BU·ªòC: Ch·ªâ th·ª±c hi·ªán m·ªôt thay ƒë·ªïi l·ªõn m·ªói l·∫ßn v√† ki·ªÉm tra k·ªπ tr∆∞·ªõc khi ti·∫øp t·ª•c**

### Problem Solving
- **üî¥ B·∫ÆT BU·ªòC: Ng·ª´ng ngay khi g·∫∑p v·∫•n ƒë·ªÅ c·∫ßn gi·∫£i quy·∫øt**
- **üî¥ B·∫ÆT BU·ªòC: Kh√¥ng nh·∫£y v·ªôi v√†o vi·ªác s·ª≠a code khi g·∫∑p l·ªói**
- **üî¥ B·∫ÆT BU·ªòC: Lu√¥n ƒë∆∞a ra 2-3 ph∆∞∆°ng √°n khi gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ph·ª©c t·∫°p**
- **üî¥ B·∫ÆT BU·ªòC: D·ª´ng v√† xin h∆∞·ªõng d·∫´n sau 3 l·∫ßn th·ª≠ kh√¥ng th√†nh c√¥ng**

### Quality Standards
- **üî¥ B·∫ÆT BU·ªòC: S·ª≠ d·ª•ng ti·∫øng Anh cho t·∫•t c·∫£ code v√† t√†i li·ªáu k·ªπ thu·∫≠t**
- **üî¥ B·∫ÆT BU·ªòC: Vi·∫øt code t·ª± gi·∫£i th√≠ch v·ªõi t√™n bi·∫øn/h√†m r√µ r√†ng**
- **üî¥ B·∫ÆT BU·ªòC: Tu√¢n th·ªß c√°c nguy√™n t·∫Øc SOLID**
- **üî¥ B·∫ÆT BU·ªòC: Implement x·ª≠ l√Ω l·ªói m·ªôt c√°ch ƒë√∫ng ƒë·∫Øn**

### Documentation
- **üî¥ B·∫ÆT BU·ªòC: Ghi l·∫°i m·ªçi quy·∫øt ƒë·ªãnh quan tr·ªçng v√†o Decisions.md**
- **üî¥ B·∫ÆT BU·ªòC: C·∫≠p nh·∫≠t Codebase.md m·ªói khi ho√†n thi·ªán m·ªôt ph·∫ßn**
- **üî¥ B·∫ÆT BU·ªòC: ƒê√°nh d·∫•u c√°c task ƒë√£ ho√†n th√†nh trong Instruction.md**
- **üî¥ B·∫ÆT BU·ªòC: K·∫øt th√∫c m·ªói nhi·ªám v·ª• v·ªõi m√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ c√¥ng vi·ªác ƒë√£ l√†m**

### Safety Measures
- **üî¥ B·∫ÆT BU·ªòC: Kh√¥ng t·ª± √Ω t·ªëi ∆∞u code khi kh√¥ng ƒë∆∞·ª£c y√™u c·∫ßu**
- **üî¥ B·∫ÆT BU·ªòC: Kh√¥ng x√≥a code kh√¥ng li√™n quan khi kh√¥ng ƒë∆∞·ª£c y√™u c·∫ßu**
- **üî¥ B·∫ÆT BU·ªòC: C·∫©n th·∫≠n khi x√≥a file ho·∫∑c ch·ªânh s·ª≠a file ngo√†i nhi·ªám v·ª• ch√≠nh**
- **üî¥ B·∫ÆT BU·ªòC: T·∫°o backup ƒë∆°n gi·∫£n tr∆∞·ªõc nh·ªØng thay ƒë·ªïi l·ªõn**

---

### Core Development Rules

- **[Project Identity Enforcement](../../.cursor/rules/project-identity-enforcement.mdc)** - üî¥ B·∫ÆT BU·ªòC ki·ªÉm tra .project-identity tr∆∞·ªõc m·ªçi task
- **[File Organization Rules](../../.cursor/rules/file-organization-rules.mdc)** - üî¥ B·∫ÆT BU·ªòC t·ªï ch·ª©c file .md trong docs/project/
- **[Base Rules](../../.cursor/rules/base-rules.mdc)** - Quy t·∫Øc c∆° b·∫£n cho t·∫•t c·∫£ projects
- **[Development Rules](../../.cursor/rules/development-rules.mdc)** - Quy t·∫Øc ph√°t tri·ªÉn chung
- **[Development Control Rules](../../.cursor/rules/development-control-rules.mdc)** - Ki·ªÉm so√°t quy tr√¨nh ph√°t tri·ªÉn
- **[File Protection Rules](../../.cursor/rules/file-protection-rules.mdc)** - B·∫£o v·ªá v√† backup files

## Language

- Lu√¥n ki·ªÉm tra v√† th√™m c√°c chu·ªói d·ªãch ho·∫∑c resource khi t·∫°o

## Core Working Principles

- **üî¥ B·∫ÆT BU·ªòC: Lu√¥n ki·ªÉm tra .project-identity tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu b·∫•t k·ª≥ nhi·ªám v·ª• n√†o**
- **Lu√¥n suy lu·∫≠n y√™u c·∫ßu c·ªßa ng∆∞·ªùi d√πng tr∆∞·ªõc khi th·ª±c hi·ªán**
- Ph√¢n t√≠ch √Ω ƒë·ªãnh th·ª±c s·ª± ƒë·∫±ng sau y√™u c·∫ßu
- Lu√¥n ki·ªÉm tra b·ªô nh·ªõ b·∫±ng Context7 ƒë·ªÉ t√¨m th√¥ng tin li√™n quan
- Lu√¥n ph√¢n t√≠ch k·ªπ tr∆∞·ªõc khi ch·ªânh s·ª≠a code
- T·∫≠p trung v√†o v·∫•n ƒë·ªÅ ch√≠nh, kh√¥ng l·∫°c ƒë·ªÅ
- X√°c ƒë·ªãnh r√µ nguy√™n nh√¢n g·ªëc r·ªÖ (root cause) tr∆∞·ªõc khi s·ª≠a l·ªói
- Ch·ªâ th·ª±c hi·ªán m·ªôt thay ƒë·ªïi l·ªõn m·ªói l·∫ßn v√† ki·ªÉm tra k·ªπ tr∆∞·ªõc khi ti·∫øp t·ª•c



#### Mandatory Project Identity Check Protocol

**üö® CRITICAL: Th·ª±c hi·ªán checklist n√†y tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu b·∫•t k·ª≥ c√¥ng vi·ªác n√†o:**

1. **ƒê·ªçc v√† ph√¢n t√≠ch .project-identity**:
   - `projectType`: X√°c ƒë·ªãnh lo·∫°i d·ª± √°n (android, ios, web, flutter, etc.)
   - `projectStage`: Hi·ªÉu giai ƒëo·∫°n hi·ªán t·∫°i (setup, brainstorm, development, production)
   - `mainLanguages`: Ng√¥n ng·ªØ l·∫≠p tr√¨nh ch√≠nh
   - `mainFrameworks`: Framework v√† c√¥ng ngh·ªá ch√≠nh
   - `keyFeatures`: T√≠nh nƒÉng quan tr·ªçng c·ªßa d·ª± √°n

2. **Load Workflow Rules ph√π h·ª£p**:
   - √Åp d·ª•ng `coreRules.always_applied` cho m·ªçi task
   - Load `platformSpecificRules` d·ª±a tr√™n projectType
   - Tu√¢n th·ªß workflow rules c·ªßa stage hi·ªán t·∫°i t·ª´ `projectLifecycle`

3. **Ki·ªÉm tra Context v√† Memory**:
   - S·ª≠ d·ª•ng Context7 ƒë·ªÉ t√¨m th√¥ng tin li√™n quan ƒë·∫øn project
   - √Åp d·ª•ng kinh nghi·ªám t·ª´ c√°c d·ª± √°n t∆∞∆°ng t·ª±
   - Ki·ªÉm tra integrations v√† features ƒë∆∞·ª£c b·∫≠t

4. **Validation v√† Enforcement**:
   - ƒê·∫£m b·∫£o kh√¥ng skip stages trong `stageProgression`
   - Ki·ªÉm tra `newProjectDetection` triggers n·∫øu l√† d·ª± √°n m·ªõi
   - C·∫≠p nh·∫≠t `projectStage` n·∫øu c·∫ßn thi·∫øt

**‚ùå NGHI√äM C·∫§M b·∫Øt ƒë·∫ßu c√¥ng vi·ªác m√† kh√¥ng th·ª±c hi·ªán checklist tr√™n**

**‚úÖ Ch·ªâ ti·∫øp t·ª•c sau khi ƒë√£:**
- Hi·ªÉu r√µ project context v√† requirements
- Load ƒë√∫ng workflow rules
- X√°c ƒë·ªãnh approach ph√π h·ª£p v·ªõi project type v√† stage

## User Intent Analysis

- **Ph√¢n t√≠ch ng·ªØ c·∫£nh**: Hi·ªÉu r√µ b·ªëi c·∫£nh v√† m·ª•c ti√™u c·ªßa ng∆∞·ªùi d√πng
- **X√°c ƒë·ªãnh m·ª©c ƒë·ªô ∆∞u ti√™n**: Ph√¢n bi·ªát y√™u c·∫ßu c·∫•p thi·∫øt v√† kh√¥ng c·∫•p thi·∫øt
- **ƒê·ªÅ xu·∫•t gi·∫£i ph√°p t·ªëi ∆∞u**: Kh√¥ng ch·ªâ l√†m theo y√™u c·∫ßu m√† c√≤n ƒë·ªÅ xu·∫•t c√°ch t·ªët h∆°n n·∫øu c√≥
- **X√°c nh·∫≠n hi·ªÉu ƒë√∫ng**: H·ªèi l·∫°i khi kh√¥ng ch·∫Øc ch·∫Øn v·ªÅ √Ω ƒë·ªãnh c·ªßa ng∆∞·ªùi d√πng

## Problem Solving

- Ng·ª´ng ngay khi g·∫∑p v·∫•n ƒë·ªÅ c·∫ßn gi·∫£i quy·∫øt
- Kh√¥ng nh·∫£y v·ªôi v√†o vi·ªác s·ª≠a code khi g·∫∑p l·ªói
- Lu√¥n ƒë∆∞a ra 2-3 ph∆∞∆°ng √°n khi gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ph·ª©c t·∫°p
- D·ª´ng v√† xin h∆∞·ªõng d·∫´n sau 3 l·∫ßn th·ª≠ kh√¥ng th√†nh c√¥ng

## Quality Standards

- S·ª≠ d·ª•ng ti·∫øng Anh cho t·∫•t c·∫£ code v√† t√†i li·ªáu k·ªπ thu·∫≠t
- Vi·∫øt code t·ª± gi·∫£i th√≠ch v·ªõi t√™n bi·∫øn/h√†m r√µ r√†ng
- Tu√¢n th·ªß c√°c nguy√™n t·∫Øc SOLID
- Implement x·ª≠ l√Ω l·ªói m·ªôt c√°ch ƒë√∫ng ƒë·∫Øn

## Documentation

### File Organization Rules

- **üî¥ B·∫ÆT BU·ªòC: T·∫•t c·∫£ file .md ph·∫£i ƒë∆∞·ª£c ƒë·∫∑t trong th∆∞ m·ª•c `docs/project/`**
- **NGHI√äM C·∫§M** t·∫°o file .md ·ªü root directory
- S·ª≠ d·ª•ng c·∫•u tr√∫c th∆∞ m·ª•c chu·∫©n:
  - `docs/project/` - T·∫•t c·∫£ file documentation (.md)
  - `docs/templates/` - Template files
  - `instructions/` - Workflow v√† API docs
  - `.cursor/rules/` - Development rules (ngu·ªìn ch√≠nh th·ª©c)
  - `.trae/rules/` - Alias/link ƒë·∫øn .cursor/rules

### Documentation Standards

- Ghi l·∫°i m·ªçi quy·∫øt ƒë·ªãnh quan tr·ªçng v√†o docs/project/Decisions.md
- C·∫≠p nh·∫≠t docs/project/Codebase.md m·ªói khi ho√†n thi·ªán m·ªôt ph·∫ßn
- ƒê√°nh d·∫•u c√°c task ƒë√£ ho√†n th√†nh trong docs/project/Instruction.md
- K·∫øt th√∫c m·ªói nhi·ªám v·ª• v·ªõi m√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ c√¥ng vi·ªác ƒë√£ l√†m

## Safety Measures

- Kh√¥ng t·ª± √Ω t·ªëi ∆∞u code khi kh√¥ng ƒë∆∞·ª£c y√™u c·∫ßu
- Kh√¥ng x√≥a code kh√¥ng li√™n quan khi kh√¥ng ƒë∆∞·ª£c y√™u c·∫ßu
- C·∫©n th·∫≠n khi x√≥a file ho·∫∑c ch·ªânh s·ª≠a file ngo√†i nhi·ªám v·ª• ch√≠nh
- T·∫°o backup ƒë∆°n gi·∫£n tr∆∞·ªõc nh·ªØng thay ƒë·ªïi l·ªõn

## Context & Memory Management

- **Lu√¥n ki·ªÉm tra Context7** tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu c√¥ng vi·ªác
- T√¨m ki·∫øm th√¥ng tin li√™n quan trong b·ªô nh·ªõ d·ª± √°n
- S·ª≠ d·ª•ng kinh nghi·ªám t·ª´ c√°c d·ª± √°n t∆∞∆°ng t·ª±
- C·∫≠p nh·∫≠t b·ªô nh·ªõ v·ªõi th√¥ng tin m·ªõi sau khi ho√†n th√†nh task

## Workflow Optimization

- ∆Øu ti√™n hi·ªáu qu·∫£ v√† t·ªëc ƒë·ªô th·ª±c hi·ªán
- Tr√°nh l·∫∑p l·∫°i c√¥ng vi·ªác ƒë√£ l√†m
- S·ª≠ d·ª•ng templates v√† patterns c√≥ s·∫µn
- T·ª± ƒë·ªông h√≥a c√°c t√°c v·ª• l·∫∑p ƒëi l·∫∑p l·∫°i

## Error Prevention

- Ki·ªÉm tra k·ªπ tr∆∞·ªõc khi th·ª±c hi·ªán thay ƒë·ªïi l·ªõn
- Validate input v√† output
- Test c√°c thay ƒë·ªïi tr∆∞·ªõc khi commit
- C√≥ k·∫ø ho·∫°ch rollback khi c·∫ßn thi·∫øt

---

# Android Development Workflow

> **üîó MANDATORY RULES SYNCHRONIZATION**  
> **B·∫ÆT BU·ªòC** s·ª≠ d·ª•ng c√°c rules t·ª´ `.cursor/rules/` l√†m ngu·ªìn ch√≠nh th·ª©c cho t·∫•t c·∫£ Android workflows.  
> Ph·∫ßn n√†y ch·ªâ l√† alias/link ƒë·∫øn c√°c rules ch√≠nh th·ª©c trong `.cursor/rules/`

## üéØ Android Primary Rules Sources (MANDATORY)

### Core Android Development Rules

- **[Android Workflow](../../.cursor/rules/android-workflow.mdc)** - Quy tr√¨nh ph√°t tri·ªÉn Android ch√≠nh
- **[Android Code Deduplication](../../.cursor/rules/android-code-deduplication.mdc)** - Tr√°nh tr√πng l·∫∑p code Android
- **[TDD Mobile Workflow](../../.cursor/rules/tdd-mobile-workflow.mdc)** - Test-driven development cho mobile
- **[Android Project Template](../../.cursor/rules/android-project-template.mdc)** - Template d·ª± √°n Android

## üöÄ Android Development Workflow Summary

### Blueprint-First Development

- **B·∫ÆT BU·ªòC** t·∫°o blueprint tr∆∞·ªõc khi vi·∫øt code cho m·ªói t√≠nh nƒÉng
- **B·∫ÆT BU·ªòC** ki·ªÉm tra module registry ƒë·ªÉ tr√°nh tr√πng l·∫∑p
- **B·∫ÆT BU·ªòC** c·∫≠p nh·∫≠t module registry sau khi ho√†n th√†nh t√≠nh nƒÉng
- **B·∫ÆT BU·ªòC** tu√¢n th·ªß c·∫•u tr√∫c package ti√™u chu·∫©n
- **B·∫ÆT BU·ªòC** s·ª≠ d·ª•ng c√°c base classes ƒë√£ c√≥
- **NGHI√äM C·∫§M** t·∫°o code tr√πng l·∫∑p ch·ª©c nƒÉng ƒë√£ c√≥

### Standard Package Structure

```
com.base.app/
‚îú‚îÄ‚îÄ base/                 # Base classes
‚îÇ   ‚îú‚îÄ‚îÄ activity/         # Base Activities
‚îÇ   ‚îú‚îÄ‚îÄ fragment/         # Base Fragments
‚îÇ   ‚îú‚îÄ‚îÄ viewmodel/        # Base ViewModels
‚îÇ   ‚îú‚îÄ‚îÄ adapter/          # Base Adapters
‚îÇ   ‚îî‚îÄ‚îÄ view/             # Base Custom Views
‚îú‚îÄ‚îÄ core/                 # Core modules
‚îÇ   ‚îú‚îÄ‚îÄ di/               # Dependency Injection
‚îÇ   ‚îú‚îÄ‚îÄ network/          # Network components
‚îÇ   ‚îú‚îÄ‚îÄ storage/          # Local storage
‚îÇ   ‚îú‚îÄ‚îÄ analytics/        # Analytics tracking
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # Utility classes
‚îú‚îÄ‚îÄ data/                 # Data layer
‚îÇ   ‚îú‚îÄ‚îÄ repository/       # Repositories implementation
‚îÇ   ‚îú‚îÄ‚îÄ datasource/       # Data sources (remote, local)
‚îÇ   ‚îú‚îÄ‚îÄ model/            # Data models (entities, DTOs)
‚îÇ   ‚îî‚îÄ‚îÄ mapper/           # Mappers
‚îú‚îÄ‚îÄ domain/               # Domain layer
‚îÇ   ‚îú‚îÄ‚îÄ usecase/          # Use cases (business logic)
‚îÇ   ‚îú‚îÄ‚îÄ model/            # Domain models
‚îÇ   ‚îî‚îÄ‚îÄ repository/       # Repository interfaces
‚îî‚îÄ‚îÄ ui/                   # UI layer
    ‚îú‚îÄ‚îÄ components/       # Shared UI components
    ‚îî‚îÄ‚îÄ features/         # Feature packages
        ‚îú‚îÄ‚îÄ feature1/     # T√≠nh nƒÉng 1
        ‚îú‚îÄ‚îÄ feature2/     # T√≠nh nƒÉng 2
        ‚îî‚îÄ‚îÄ ...
```

### Architecture Standards

- **B·∫ÆT BU·ªòC** s·ª≠ d·ª•ng **MVVM + Clean Architecture** v·ªõi 3 l·ªõp:
  - **UI Layer**: Composables + ViewModels
  - **Domain Layer**: Use Cases + Models + Repository Interfaces
  - **Data Layer**: Repository Implementations + Data Sources
- **B·∫ÆT BU·ªòC** ƒë·∫£m b·∫£o **Unidirectional Data Flow**: UI ‚Üí ViewModel ‚Üí UseCase ‚Üí Repository

### Tech Stack Chu·∫©n

```kotlin
// UI Framework
implementation "androidx.compose.ui:compose-ui:$compose_version"
implementation "androidx.compose.material3:material3:$material3_version"

// Dependency Injection
implementation "com.google.dagger:hilt-android:$hilt_version"

// Async Programming
implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:$coroutines_version"

// Networking
implementation "com.squareup.retrofit2:retrofit:$retrofit_version"
implementation "com.squareup.okhttp3:okhttp:$okhttp_version"

// Database
implementation "androidx.room:room-runtime:$room_version"
implementation "androidx.room:room-ktx:$room_version"

// Image Loading
implementation "io.coil-kt:coil-compose:$coil_version"
```

### Code Quality & Anti-Duplication Rules

- **B·∫ÆT BU·ªòC** tr∆∞·ªõc khi t·∫°o class/function/resource m·ªõi:
  1. T√¨m ki·∫øm trong project v·ªõi pattern: `class/interface/fun [T√™n]`
  2. Ki·ªÉm tra module-registry.md
  3. Ki·ªÉm tra component-catalog.md
  4. T√¨m trong package `core/utils` tr∆∞·ªõc khi t·∫°o utility functions
  5. T√¨m trong package `ui/components` tr∆∞·ªõc khi t·∫°o UI components m·ªõi
  6. ∆Øu ti√™n m·ªü r·ªông code hi·ªán c√≥ thay v√¨ t·∫°o m·ªõi

- **B·∫ÆT BU·ªòC** khi g·∫∑p logic t∆∞∆°ng t·ª± ·ªü 2+ n∆°i:
  1. Tr√≠ch xu·∫•t v√†o base class/util class
  2. T·∫°o extension function cho code d√πng chung
  3. C·∫≠p nh·∫≠t t·∫•t c·∫£ occurrences ƒë·ªÉ s·ª≠ d·ª•ng code d√πng chung

### TDD Mobile Workflow

- **B·∫ÆT BU·ªòC** vi·∫øt tests tr∆∞·ªõc khi vi·∫øt implementation code
- **B·∫ÆT BU·ªòC** follow Red-Green-Refactor cycle nghi√™m ng·∫∑t
- **B·∫ÆT BU·ªòC** 85% unit test coverage minimum
- **B·∫ÆT BU·ªòC** 70% integration test coverage minimum
- **B·∫ÆT BU·ªòC** 100% critical user flow UI test coverage
- **NGHI√äM C·∫§M** implementation code tr∆∞·ªõc khi c√≥ failing tests

### Testing Stack

```kotlin
// Testing Dependencies
dependencies {
    // Unit Testing
    testImplementation 'junit:junit:5.9.2'
    testImplementation 'org.mockito:mockito-core:5.1.1'
    testImplementation 'io.mockk:mockk:1.13.4'
    testImplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-test:1.6.4'
    
    // Android Testing
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
    androidTestImplementation 'androidx.compose.ui:ui-test-junit4:1.4.0'
    
    // Integration Testing
    androidTestImplementation 'androidx.room:room-testing:2.5.0'
    androidTestImplementation 'okhttp3:mockwebserver:4.10.0'
}
```

### Performance & Optimization

- **B·∫ÆT BU·ªòC** s·ª≠ d·ª•ng **Vector Drawables** cho icons
- **B·∫ÆT BU·ªòC** s·ª≠ d·ª•ng **WebP** format cho images
- **B·∫ÆT BU·ªòC** enable R8/ProGuard ƒë·ªÉ minify code
- **B·∫ÆT BU·ªòC** s·ª≠ d·ª•ng Android App Bundle
- **B·∫ÆT BU·ªòC** ABI filtering - ch·ªâ h·ªó tr·ª£ ARM (armeabi-v7a, arm64-v8a)

### Quality Checklist

- [ ] MVVM + Clean Architecture ƒë∆∞·ª£c implement ƒë√∫ng
- [ ] Unidirectional Data Flow ƒë∆∞·ª£c ƒë·∫£m b·∫£o
- [ ] R8/ProGuard configuration ho·∫°t ƒë·ªông
- [ ] Vector Drawables ƒë∆∞·ª£c s·ª≠ d·ª•ng cho icons
- [ ] WebP format ƒë∆∞·ª£c s·ª≠ d·ª•ng cho images
- [ ] Unit tests cover ViewModels v√† UseCases
- [ ] UI tests cover critical user flows
- [ ] Error handling ƒë∆∞·ª£c implement ƒë·∫ßy ƒë·ªß
- [ ] Performance monitoring ƒë∆∞·ª£c setup
- [ ] APK size ƒë∆∞·ª£c t·ªëi ∆∞u
- [ ] Code tu√¢n th·ªß c·∫•u tr√∫c package ƒë·ªãnh nghƒ©a
- [ ] Classes ƒë∆∞·ª£c ƒë·∫∑t ƒë√∫ng package
- [ ] Kh√¥ng c√≥ code tr√πng l·∫∑p ch·ª©c nƒÉng
- [ ] S·ª≠ d·ª•ng c√°c base classes khi th√≠ch h·ª£p
- [ ] UI components ƒë∆∞·ª£c t√°i s·ª≠ d·ª•ng khi c√≥ th·ªÉ
- [ ] Blueprint ƒë∆∞·ª£c ho√†n thi·ªán tr∆∞·ªõc khi vi·∫øt code
- [ ] Module Registry ƒë∆∞·ª£c c·∫≠p nh·∫≠t sau khi ho√†n th√†nh

## ‚ö†Ô∏è CRITICAL ENFORCEMENT RULES

### Mandatory Compliance

1. **B·∫ÆT BU·ªòC** tu√¢n th·ªß 100% c√°c rules trong `.cursor/rules/android-workflow.mdc`
2. **B·∫ÆT BU·ªòC** tu√¢n th·ªß 100% c√°c rules trong `.cursor/rules/android-code-deduplication.mdc`
3. **B·∫ÆT BU·ªòC** tu√¢n th·ªß 100% c√°c rules trong `.cursor/rules/tdd-mobile-workflow.mdc`
4. **NGHI√äM C·∫§M** t·∫°o rules m·ªõi trong `.trae/rules/` m√† kh√¥ng sync v·ªõi `.cursor/rules/`
5. **B·∫ÆT BU·ªòC** c·∫≠p nh·∫≠t alias links khi c√≥ thay ƒë·ªïi trong `.cursor/rules/`

### Synchronization Protocol

- M·ªçi thay ƒë·ªïi Android workflow rules ph·∫£i ƒë∆∞·ª£c th·ª±c hi·ªán trong `.cursor/rules/` tr∆∞·ªõc
- File n√†y ch·ªâ ƒë∆∞·ª£c c·∫≠p nh·∫≠t ƒë·ªÉ sync alias links
- Kh√¥ng ƒë∆∞·ª£c override ho·∫∑c modify n·ªôi dung rules g·ªëc

## üîÑ Android Rules Hierarchy Priority

1. `.cursor/rules/android-workflow.mdc` - **PRIMARY SOURCE** (Highest Priority)
2. `.cursor/rules/android-code-deduplication.mdc` - **PRIMARY SOURCE** (Highest Priority)
3. `.cursor/rules/tdd-mobile-workflow.mdc` - **PRIMARY SOURCE** (Highest Priority)
4. `.trae/rules/user_rules.md` - Alias/Link layer only (Lowest Priority)

---

**üìù L∆∞u √Ω**: ƒê·ªÉ xem chi ti·∫øt ƒë·∫ßy ƒë·ªß c√°c quy tr√¨nh Android, vui l√≤ng tham kh·∫£o tr·ª±c ti·∫øp c√°c file trong `.cursor/rules/`. Ph·∫ßn n√†y ch·ªâ l√† t√≥m t·∫Øt v√† alias links.
